<article class="review-card" role="article" aria-labelledby="card-title-{{ include.title | slugify }}">
  {% if include.image %}
    {% include responsive-product-image.html 
       jpg_base=include.image
       webp_base=include.image_webp
       avif_base=include.image_avif
       alt=include.title
       loading="lazy"
       width="300"
       height="200"
       class="product-small product-square"
       sizes="(max-width: 768px) 100vw, 300px"
    %}
  {% endif %}
  
  <div class="review-card-content">
    <h3 class="review-card-title" id="card-title-{{ include.title | slugify }}">
      <a href="{{ include.url | relative_url }}"
         class="review-card-link"
         aria-label="Read review of {{ include.title | strip_html }}">
        {{ include.title }}
      </a>
    </h3>
    
    {% if include.tagline %}
    <p class="review-card-tagline">{{ include.tagline }}</p>
    {% endif %}
    
    {% if include.rating %}
    <div class="review-card-rating"
         role="img" 
         aria-label="Rating {{ include.rating }} out of 5 stars">
      <span aria-hidden="true" class="stars">{{ include.rating }}</span>
      {% if include.score %}
      <span aria-label="Score {{ include.score }} out of 5" class="score">({{ include.score }}/5)</span>
      {% endif %}
    </div>
    {% endif %}
    
    {% if include.price %}
    <div class="review-card-price">
      <span aria-label="Price ${{ include.price }}" class="price">${{ include.price }}</span>
      {% if include.badge %}
      <span class="badge badge-{{ include.badge | downcase | replace: ' ', '-' }}"
            aria-label="{{ include.badge }}">{{ include.badge }}</span>
      {% endif %}
    </div>
    {% endif %}
    
    <div class="review-card-meta">
      <span class="category">{{ include.category | default: "Review" }}</span>
      {% if include.updated %}
      <span aria-label="Updated {{ include.updated }}" class="updated">Updated {{ include.updated }}</span>
      {% endif %}
    </div>
    
    {% if include.features %}
    <ul aria-label="Key features" class="review-card-features">
      {% for feature in include.features %}
      <li>{{ feature }}</li>
      {% endfor %}
    </ul>
    {% endif %}
    
    <div class="review-card-actions">
      <a href="{{ include.url | relative_url }}"
         class="btn btn-primary btn-read-review"
         aria-label="Read full review of {{ include.title | strip_html }}">
        <span aria-hidden="true" class="btn-icon">ðŸ“–</span>
        Read Full Review
      </a>
      
      {% if include.buy_link %}
      <a href="{{ include.buy_link }}"
         class="btn btn-secondary btn-buy-now" 
         target="_blank" 
         rel="nofollow sponsored noopener"
         aria-label="Buy {{ include.title | strip_html }} now">
        <span aria-hidden="true" class="btn-icon">ðŸ›’</span>
        Buy Now
      </a>
      {% endif %}
    </div>
  </div>
</article>

<!-- Updated CSS for Review Card Component with responsive image support -->
<style>
.review-card {
  display: flex;
  flex-direction: column;
  background: #ffffff;
  border: 1px solid #e1e5e9;
  border-radius: 12px;
  overflow: hidden;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  height: 100%;
  max-width: 400px;
  position: relative;
}

.review-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

.review-card:focus-within {
  outline: 2px solid #007bff;
  outline-offset: 2px;
}

/* Override responsive-product-image styles for card context */
.review-card .responsive-product-image {
  margin: 0;
  border-radius: 0;
  box-shadow: none;
}

.review-card .responsive-product-image:hover {
  transform: none;
}

.review-card .product-image {
  aspect-ratio: 16 / 9;
  object-fit: cover;
}

.review-card-content {
  padding: 1.5rem;
  flex: 1;
  display: flex;
  flex-direction: column;
}

.review-card-title {
  margin: 0 0 0.5rem 0;
  font-size: 1.25rem;
  font-weight: 600;
  line-height: 1.3;
}

.review-card-link {
  color: #2c3e50;
  text-decoration: none;
  transition: color 0.2s ease;
}

.review-card-link:hover,
.review-card-link:focus {
  color: #007bff;
  text-decoration: underline;
}

.review-card-tagline {
  margin: 0 0 1rem 0;
  color: #6c757d;
  font-size: 0.9rem;
  line-height: 1.4;
}

.review-card-rating {
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.stars {
  color: #ffc107;
  font-size: 1.1rem;
  font-weight: bold;
}

.score {
  color: #6c757d;
  font-size: 0.9rem;
}

.review-card-price {
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.price {
  font-size: 1.25rem;
  font-weight: 700;
  color: #28a745;
}

.badge {
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.badge-sale { background: #dc3545; color: white; }
.badge-new { background: #007bff; color: white; }
.badge-bestseller { background: #28a745; color: white; }
.badge-limited { background: #fd7e14; color: white; }

.review-card-meta {
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 0.85rem;
  color: #6c757d;
}

.category {
  padding: 0.25rem 0.5rem;
  background: #e9ecef;
  border-radius: 12px;
  font-weight: 500;
}

.review-card-features {
  margin: 0 0 1.5rem 0;
  padding: 0;
  list-style: none;
}

.review-card-features li {
  padding: 0.25rem 0;
  color: #495057;
  font-size: 0.9rem;
  position: relative;
  padding-left: 1rem;
}

.review-card-features li:before {
  content: "âœ“";
  position: absolute;
  left: 0;
  color: #28a745;
  font-weight: bold;
}

.review-card-actions {
  margin-top: auto;
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9rem;
  font-weight: 500;
  text-decoration: none;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
  flex: 1;
  justify-content: center;
  min-width: 120px;
}

.btn-primary {
  background: #007bff;
  color: white;
  border: 2px solid #007bff;
}

.btn-primary:hover,
.btn-primary:focus {
  background: #0056b3;
  border-color: #0056b3;
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0,123,255,0.3);
  color: white;
  text-decoration: none;
}

.btn-secondary {
  background: #28a745;
  color: white;
  border: 2px solid #28a745;
}

.btn-secondary:hover,
.btn-secondary:focus {
  background: #1e7e34;
  border-color: #1e7e34;
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(40,167,69,0.3);
  color: white;
  text-decoration: none;
}

.btn:focus {
  outline: 2px solid currentColor;
  outline-offset: 2px;
}

.btn-icon {
  font-size: 1rem;
}

/* Responsive Design */
@media (max-width: 768px) {
  .review-card {
    max-width: 100%;
  }
  
  .review-card-content {
    padding: 1rem;
  }
  
  .review-card-title {
    font-size: 1.1rem;
  }
  
  .review-card-actions {
    flex-direction: column;
  }
  
  .btn {
    flex: none;
    width: 100%;
  }
}

@media (prefers-reduced-motion: reduce) {
  .review-card,
  .btn {
    transition: none;
  }
  
  .review-card:hover {
    transform: none;
  }
}
</style>

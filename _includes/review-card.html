<article aria-labelledby="card-title-{{ include.title | slugify }}" class="review-card" role="article">
  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Product",
    "name": "{{ include.title | strip_html | jsonify }}",
    {% if include.image %}
    "image": [
      "{{ site.url }}{{ include.image | replace: '.jpg', '.jpg' | absolute_url }}"
      {% if include.image_webp %},"{{ site.url }}{{ include.image_webp | replace: '.webp', '.webp' | absolute_url }}"{% endif %}
      {% if include.image_avif %},"{{ site.url }}{{ include.image_avif | replace: '.avif', '.avif' | absolute_url }}"{% endif %}
    ],
    {% endif %}
    {% if include.tagline %}
    "description": {{ include.tagline | strip_html | jsonify }},
    {% endif %}
    "brand": {
      "@type": "Brand",
      "name": "{{ include.brand | default: 'EarFun' }}"
    },
    {% if include.price %}
    "offers": {
      "@type": "Offer",
      "price": "{{ include.price }}",
      "priceCurrency": "USD",
      "availability": "{{ include.availability | default: 'https://schema.org/InStock' }}",
      {% if include.buy_link %}
      "url": "{{ include.buy_link }}",
      {% endif %}
      "seller": {
        "@type": "Organization",
        "name": "{{ include.seller | default: 'Amazon' }}"
      }
    },
    {% endif %}
    {% if include.rating and include.score %}
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "{{ include.score }}",
      "bestRating": "5",
      "worstRating": "1",
      "ratingCount": "{{ include.review_count | default: '1' }}"
    },
    "review": {
      "@type": "Review",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "{{ include.score }}",
        "bestRating": "5",
        "worstRating": "1"
      },
      "author": {
        "@type": "Person",
        "name": "{{ include.reviewer | default: 'EarFun Audio Expert' }}"
      },
      "datePublished": "{{ include.date_published | default: site.time | date: '%Y-%m-%d' }}",
      {% if include.updated %}
      "dateModified": "{{ include.updated | date: '%Y-%m-%d' }}",
      {% endif %}
      "reviewBody": "{{ include.review_summary | default: include.tagline | strip_html | jsonify }}"
    },
    {% endif %}
    "category": "{{ include.category | default: 'Audio Equipment' }}",
    "url": "{{ site.url }}{{ include.url | absolute_url }}"
  }
  </script>
  {% if include.image %}
    {% include responsive-product-image.html 
       jpg_base=include.image
       webp_base=include.image_webp
       avif_base=include.image_avif
       alt=include.title
       loading="lazy"
       width="300"
       height="200"
       class="product-small product-square"
       sizes="(max-width: 768px) 100vw, 300px"
    %}
  {% endif %}
  
  <div class="review-card-content">
    <h3 class="review-card-title" id="card-title-{{ include.title | slugify }}">
      <a href="{{ include.url | relative_url }}"
         class="review-card-link"
         aria-label="Read review of {{ include.title | strip_html }}">
        {{ include.title }}
      </a>
    </h3>
    
    {% if include.tagline %}
    <p class="review-card-tagline">{{ include.tagline }}</p>
    {% endif %}
    
    {% if include.rating %}
    <div class="review-card-rating"
         role="img" 
         aria-label="Rating {{ include.rating }} out of 5 stars">
      <span aria-hidden="true" class="stars">{{ include.rating }}</span>
      {% if include.score %}
      <span aria-label="Score {{ include.score }} out of 5" class="score">({{ include.score }}/5)</span>
      {% endif %}
    </div>
    {% endif %}
    
    {% if include.price %}
    <div class="review-card-price">
      <span aria-label="Price ${{ include.price }}" class="price">${{ include.price }}</span>
      {% if include.badge %}
      <span class="badge badge-{{ include.badge | downcase | replace: ' ', '-' }}"
            aria-label="{{ include.badge }}">{{ include.badge }}</span>
      {% endif %}
    </div>
    {% endif %}
    
    <div class="review-card-meta">
      <span class="category">{{ include.category | default: "Review" }}</span>
      {% if include.updated %}
      <span aria-label="Updated {{ include.updated }}" class="updated">Updated {{ include.updated }}</span>
      {% endif %}
    </div>
    
    {% if include.features %}
    <ul aria-label="Key features" class="review-card-features">
      {% for feature in include.features %}
      <li>{{ feature }}</li>
      {% endfor %}
    </ul>
    {% endif %}
    
    <div class="review-card-actions">
      <a href="{{ include.url | relative_url }}"
         class="btn btn-primary btn-read-review"
         aria-label="Read full review of {{ include.title | strip_html }}">
        <span aria-hidden="true" class="btn-icon">ðŸ“–</span>
        Read Full Review
      </a>
      
      {% if include.buy_link %}
      <a href="{{ include.buy_link }}"
         class="btn btn-secondary btn-buy-now" 
         target="_blank" 
         rel="nofollow sponsored noopener"
         aria-label="Buy {{ include.title | strip_html }} now">
        <span aria-hidden="true" class="btn-icon">ðŸ›’</span>
        Buy Now
      </a>
      {% endif %}
    </div>
  </div>
</article>

<!-- Product Schema JSON-LD for EarFun Audio Products -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "{{ include.name | default: page.title }}",
  "description": "{{ include.description | default: page.description | strip_html | truncate: 160 }}",
  "image": [
    {% if include.image %}
      "{{ site.url }}{{ include.image | relative_url }}"
    {% elsif page.product_image %}
      "{{ site.url }}{{ page.product_image | relative_url }}"
    {% else %}
      "{{ site.url }}/assets/images/{{ page.slug | default: page.title | slugify }}.jpg"
    {% endif %}
  ],
  "brand": {
    "@type": "Brand",
    "name": "{{ include.brand | default: 'EarFun' }}"
  },
  "manufacturer": {
    "@type": "Organization",
    "name": "{{ include.manufacturer | default: 'EarFun' }}"
  },
  "category": "{{ include.category | default: 'Electronics > Audio > Headphones' }}",
  "sku": "{{ include.sku | default: page.sku }}",
  "model": "{{ include.model | default: page.model }}",
  {% if include.offers or page.price %}
  "offers": {
    "@type": "Offer",
    "url": "{{ include.offer_url | default: page.affiliate_link | default: page.url }}",
    "priceCurrency": "{{ include.currency | default: 'USD' }}",
    "price": "{{ include.price | default: page.price }}",
    "priceValidUntil": "{{ include.price_valid_until | default: '2025-12-31' }}",
    "availability": "{{ include.availability | default: 'https://schema.org/InStock' }}",
    "itemCondition": "{{ include.condition | default: 'https://schema.org/NewCondition' }}",
    "seller": {
      "@type": "Organization",
      "name": "{{ include.seller | default: 'Amazon' }}"
    }
  },
  {% endif %}
  {% if include.aggregateRating or page.rating %}
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ include.rating | default: page.rating }}",
    "bestRating": "5",
    "worstRating": "1",
    "ratingCount": "{{ include.rating_count | default: page.rating_count | default: '100' }}",
    "reviewCount": "{{ include.review_count | default: page.review_count | default: '50' }}"
  },
  {% endif %}
  {% if include.features or page.features %}
  "additionalProperty": [
    {% assign features = include.features | default: page.features %}
    {% for feature in features %}
    {
      "@type": "PropertyValue",
      "name": "{{ feature.name }}",
      "value": "{{ feature.value }}"
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ],
  {% endif %}
  "url": "{{ site.url }}{{ page.url }}"
}
</script>

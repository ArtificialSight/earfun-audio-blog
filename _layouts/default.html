<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Jekyll SEO Tag - handles all SEO meta tags, Open Graph, Twitter Cards, etc. -->
  {% seo %}
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="{{ '/assets/images/favicon.ico' | relative_url }}">
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  {% if page.extra_css %}
    {% for css in page.extra_css %}
      <link rel="stylesheet" href="{{ css | relative_url }}">
    {% endfor %}
  {% endif %}
  
  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "{% if page.layout == 'post' %}BlogPosting{% else %}WebSite{% endif %}",
    "name": "{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}",
    "description": "{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}",
    "url": "{{ page.url | absolute_url }}",
    "author": {
      "@type": "Organization",
      "name": "{{ site.title }}"
    },
    "publisher": {
      "@type": "Organization",
      "name": "{{ site.title }}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ '/assets/images/logo.png' | absolute_url }}"
      }
    }{% if page.layout == 'post' %},
    "datePublished": "{{ page.date | date_to_xmlschema }}",
    "dateModified": "{{ page.last_modified_at | default: page.date | date_to_xmlschema }}",
    "image": "{% if page.image %}{{ page.image | absolute_url }}{% else %}{{ '/assets/images/og-default.jpg' | absolute_url }}{% endif %}"{% endif %}
  }
  </script>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container">
      <nav class="main-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-brand">
          <a href="{{ '/' | relative_url }}" class="site-logo">
            <img src="{{ '/assets/images/logo.png' | relative_url }}" alt="{{ site.title }}" width="150" height="50">
          </a>
        </div>
        
        <button class="mobile-menu-btn" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="nav-links">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>
        
        <div class="nav-links" id="nav-links">
          <ul class="nav-menu">
            <li><a href="{{ '/' | relative_url }}"{% if page.url == '/' %} class="active"{% endif %}>Home</a></li>
            <li><a href="{{ '/reviews/' | relative_url }}"{% if page.url contains '/reviews/' %} class="active"{% endif %}>Reviews</a></li>
            <li><a href="{{ '/guides/' | relative_url }}"{% if page.url contains '/guides/' %} class="active"{% endif %}>Guides</a></li>
            <li><a href="{{ '/brands/' | relative_url }}"{% if page.url contains '/brands/' %} class="active"{% endif %}>Brands</a></li>
            <li><a href="{{ '/about/' | relative_url }}"{% if page.url == '/about/' %} class="active"{% endif %}>About</a></li>
            <li><a href="{{ '/contact/' | relative_url }}"{% if page.url == '/contact/' %} class="active"{% endif %}>Contact</a></li>
          </ul>
        </div>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="site-main" id="main-content">
    <div class="container">
      {% if page.layout == 'post' or page.layout == 'review' %}
        <!-- Affiliate Disclosure and Social Proof Badges before Product Reviews -->
        {% if page.layout == 'review' or page.product_review %}
          {% include affiliate-disclosure.html %}
          {% include social-proof-badges.html %}
        {% endif %}
        
        <!-- Product Reviews Header -->
        {% if page.layout == 'review' or page.product_review %}
          <section class="product-reviews-header">
            <h1>Product Reviews</h1>
          </section>
        {% endif %}
      {% endif %}
      
      {{ content }}
      
      {% if page.layout == 'post' or page.layout == 'review' %}
        <!-- Enhanced FAQ Section below product reviews if present -->
        {% if page.layout == 'review' or page.product_review %}
          {% if page.faq %}
            {% include enhanced-faq-section.html %}
          {% endif %}
        {% endif %}
      {% endif %}
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-links">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="{{ '/reviews/' | relative_url }}">Latest Reviews</a></li>
            <li><a href="{{ '/guides/' | relative_url }}">Buying Guides</a></li>
            <li><a href="{{ '/brands/' | relative_url }}">Top Brands</a></li>
            <li><a href="{{ '/about/' | relative_url }}">About Us</a></li>
            <li><a href="{{ '/sitemap.xml' | relative_url }}">Sitemap</a></li>
          </ul>
        </div>
        
        <div class="footer-contact">
          <h3>Contact</h3>
          <p>Email: <a href="mailto:{{ site.contact.email }}">{{ site.contact.email }}</a></p>
          <p>Partnerships: <a href="mailto:{{ site.contact.partnerships }}">{{ site.contact.partnerships }}</a></p>
        </div>
        
        <div class="footer-social">
          <h3>Follow Us</h3>
          <div class="social-links">
            {% if site.social.links %}
              {% for link in site.social.links %}
                <a href="{{ link }}" target="_blank" rel="noopener" aria-label="Social link">ðŸ”—</a>
              {% endfor %}
            {% endif %}
          </div>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>Â© {{ 'now' | date: '%Y' }} {{ site.title }}. Built with Jekyll.</p>
        <div class="footer-legal">
          <a href="{{ '/privacy-policy/' | relative_url }}">Privacy Policy</a>
          <a href="{{ '/terms-of-use/' | relative_url }}">Terms of Use</a>
          <a href="{{ '/for-brands/' | relative_url }}">For Brands</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="{{ '/assets/js/main.js' | relative_url }}" defer></script>
  {% if page.extra_js %}
    {% for js in page.extra_js %}
      <script src="{{ js | relative_url }}" defer></script>
    {% endfor %}
  {% endif %}
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const btn = document.querySelector('.mobile-menu-btn');
      const links = document.querySelector('.nav-links');
      
      if (btn && links) {
        btn.addEventListener('click', function() {
          const expanded = this.getAttribute('aria-expanded') === 'true';
          this.setAttribute('aria-expanded', !expanded);
          links.classList.toggle('active');
        });
      }
      
      // Standardized affiliate button handling
      const affiliateButtons = document.querySelectorAll('.affiliate-button');
      affiliateButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          // Track affiliate link clicks
          if (typeof gtag !== 'undefined') {
            gtag('event', 'affiliate_click', {
              'event_category': 'affiliate',
              'event_label': this.getAttribute('data-product') || 'unknown'
            });
          }
        });
      });
    });
  </script>
</body>
</html>
